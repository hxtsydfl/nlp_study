# RAG流程
检索增强生成
大模型存在的局限性：时效性（信息不能实时更新）、模型幻觉（模型自信的给出错误答案）、数据安全问题
## 知识库提取
### 数据准备与知识库构建
收集数据： 首先，需要收集与问答系统相关的各种数据，这些数据可以来自文档、网页、数据库等多种来源。

数据清洗： 对收集到的数据进行清洗，去除噪声、重复项和无关信息，确保数据的质量和准确性。

知识库构建： 将清洗后的数据构建成知识库。这通常包括将文本分割成较小的片段（chunks），使用文本嵌入模型（如GLM）将这些片段转换成向量，并将这些向量存储在向量数据库（如FAISS、Milvus等）中。


### 数据构建
将文本数据进行chunk划分，有多种方式，如按段落、按句子、按单词等。

嵌入：将chunk进行embedding后进行落库，可以是传统反向索引数据库例如es，也可以是向量数据库。

## 检索
将用户问题进行embedding，在向量数据库中进行检索，得到最相关的chunk。

可以从不同角度进行相似度排序，也可以是使用传统数据库进行反向索引

重排序：经过多路召回之后，将所有的排序结果再次进行重排序，可以使用交叉编译器（cross-encoder）进行向量的相似度计算可以更加精准的获得排序结果

## 增强
为特定问题构建prompt，将检索到的chunk作为上下文，输入到模型中，得到最终的答案。
例如构建模版，将问题、获得的数据、答案进行拼接，输入到模型中。

## 生成

LLM将检索结果与问题整合，利用大型语言模型生成最终的回答，确保答案与用户
意图一致，同时保持自然、连贯的文本。此阶段还需应对大型模型输出可能存在的幻觉问
题。


# 总体知识库创建流程

数据收集-》数据清洗-》数据构建（可以直接落es库）-》chunk处理-》向量化-》根据不同场景落库

# 提问回答流程

问题embedding-》向量数据库检索（相似度计算）/es检索-》重排序-》prompt构建-》生成回答