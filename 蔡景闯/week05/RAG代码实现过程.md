# 1. 文档检索
1. 使用`Elasticsearch`进行全文检索
2. 对查询语句进行`Embedding`，得到向量表示
3. 使用`KNN`（最近邻）查询，在`Elasticsearch`中进行检索和查询语句向量化相似度最高的文档片段
4. 使用`RRF`（排序融合）实现两个检索结果的融合
5. 给融合后的结果进行`rerank`（重排序）打分，再重新根据分数排序

# 2. 聊天提示词生成
1. 制作固定的聊天提示词模板
2. 第一步的检索结果填入模板，生成提示词

# 3. 返回模型的结果
1. 传入第二步生成的提示词，传入大模型
2. 大模型返回结果