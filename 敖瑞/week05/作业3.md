### 初始化和配置

    - 从config中加载配置参数，包括模型路径、设备信息、RAG参数等

### 文档处理

    - 文档提取
        - 对每页文本进行分块，设置固定长度和重叠区域以保持上下文
    - 向量化以及存储
        - 对每个文本块使用embedding模型生成对应向量
        - 将文本块、文档ID、页码等信息和向量存储到es中，建立对应的索引（chunk_info、document_meta）

### 查询处理以及检索

    - 检索步骤
        - 1. 使用BM25进行关键词匹配
        - 2. 将转化为向量的用户问题，在es中进行knn搜索
        - 3. 使用rrf将两种检索结果合并，获得topk候选片段
        - 4. 如果配置文件中启用了重排序，那么就使用重排序模型对topk片段进行精细打分，然后根据分数重新排序

### 答案生成

    - 将检索出的候选片段组合成上下文，填入预设的大模型提示模板
    - 调用模型生成回答
        - 若无法从上下文中回答，则返回 无法回答，否则结合上下文逐步生成对应答案

